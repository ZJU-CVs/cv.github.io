---
layout:     post
title:      服务器运维
subtitle:   随时更新...
date:       2020-07-01
author:     JY
header-img: img/post-bg.jpg
catalog: true
tags:
    - Tools
---



#### 服务器配置jupyter步骤

> https://blog.csdn.net/u010420283/article/details/82871367

**问题：**本地无法访问

**原因：**服务器防火墙开启

**解决方案：**

```
# 关闭防火墙
1sudo systemctl stop firewalld.service
sudo systemctl disable firewalld.service 

# 检查防火墙状态
firewall-cmd --state
```





#### 服务器shell安装

(zsh安装，大大提高终端使用效率)

```bash
cat /etc/shells  # 查看Zsh是否安装
chsh -s /bin/zsh # 切换到Zsh
# 重启linux，出现提示信息，按1进入主菜单，然后按0生成一个空的.zshrc配置文件
echo $SHELL	     # 查看是否切换到Zsh
```



(Oh My Zsh这个框架开源简化Zsh的配置)

```bash
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"  # 安装
```



#### 服务器免密登陆

```bash
以从服务器A通过ssh到服务器B免密为例：

进入服务器A
cd ~/.ssh (查看服务器是否已经配置过ssh)
# 若没有.ssh文件夹，进行一下步骤
sudo apt-get install openssh-server
ssh-keygen -t rsa
(一路回车)
再次 cd ~/.ssh，会发现多了个.ssh文件夹，文件夹中有id_rsa和id_rsa.pub分别为私钥和公钥文件
vi id_rsa.pub
把 id_rsa.pub中的字符串复制
q! # 退出

进入服务器B
cd ~/.ssh （若无.ssh，同理操作）
vi authorized_keys
把刚刚复制的字符串粘贴到authorized_keys文件中
:wq! #保存并退出

sudo service ssh restart #重启ssh服务
经过以上操作后，就能实现从服务器A到服务器B登陆免密，同理可操作B->A，从而实现相互免密
```



#### Linux常用指令

##### 系统

```bash
lsb_release -a   # 查看Linux版本
```



##### 进程查看

```bash
last -f  /var/log/wtmp   # 查看每个用户的登录次数和持续时间等信息
jobs -l  # 显示当前系统的任务列表(进程号)
```



##### 用户管理

```bash
方法一：

pkexec chmod 0440 /etc/sudoers   # 修改用户权限
useradd -m user -s /bin/bash   # 添加新用户
sudo passwd user # 为新建用户添加密码
sudo adduser user sudo # 为新创建的用户添加管理员权限
cat /etc/passwd   # 显示新增的用户user

方法二：
su  # 切换为root用户，输入密码
visudo   # 设置sudo权限
加入 user ALL=(ALL:ALL) ALL 这一条规则

su - user # 用户切换为user
```



##### GPU

```bash
nvidia-smi # 查看GPU使用情况
nvcc -V    # CUDA版本查看
```

推荐nvtop (https://github.com/Syllo/nvtop)



##### 文件操作

```bash
pwd   # 显示工作路径 
ls -l # 显示文件和目录的详细资料 
ls -a # 显示隐藏文件 
tree  # 显示文件和目录由根目录开始的树形结构
cp file1 file2   # 复制一个文件 
cp dir/* .       # 复制一个目录下的所有文件到当前工作目录 
ln -s file1 lnk1 # 创建一个指向文件或目录的物理链接 
find / -user user1 搜索属于用户 'user1' 的文件和目录 
find /home/user1 -name \*.bin # 在目录 '/ home/user1' 中搜索带有'.bin' 结尾的文件 

tar -cvfz archive.tar.gz dir1 # 创建一个gzip格式文件
tar -zxvf archive.tar.gz # 解压一个gzip格式文件 
tar -xvf archive.tar # 解压tar格式文件

du -sh * | sort -nr   # 查看文件大小
```



##### 网络管理

```
sudo vpn-connect # 网络连接
sudo vpn-connect -d  # 断开连接

vi /etc/resolv.conf  # 修改DNS
输入 nameserver 10.0.0.21  
```



##### Java 版本管理

```bash
sudo update-alternatives --display java  # 检查可用的java版本
sudo update-alternatives --config java   # 选择需要的java版本

# java安装路径查找
which java
# 用ls -lrt来找到其指向的安装路径
ls -lrt /usr/bin/java
ls -lrt /etc/alternatives/java
```



#### Shadowsocks 安装

> https://www.kjarbo.com/archives/148



#### VSCode远程launch.json

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {   "cwd": "/data0/JY/anomaly-detection/fcdd/",
            "name": "Python: fcdd Train",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            // "args": [
            //     "--dataset","cityscapes",
            //     "--filter-scale","1"
            // ]
        }
    ]
}
```

